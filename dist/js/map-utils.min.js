!function(t){"function"==typeof define&&define.amd?define("projections/euclidean",t):t()}(function(){var t=256,e=256,i=function(){this.pixelOrigin=new google.maps.Point(t/2,e/2),this.pixelsPerLonDegree=t/360,this.pixelsPerLonRadian=e/(2*Math.PI),this.scaleLat=2,this.scaleLng=1};i.prototype={pixelOrigin:new google.maps.Point(0,0),pixelsPerLonDegree:0,pixelsPerLonRadian:0,scaleLat:0,scaleLng:0,offsetLat:0,offsetLng:0,fromLatLngToPoint:function(t,e){var i=e||new google.maps.Point(0,0);return i.x=this.pixelOrigin.x+(t.lng()+this.offsetLng)*this.pixelsPerLonDegree*this.scaleLng,i.y=this.pixelOrigin.y+(-1*t.lat()+this.offsetLat)*this.pixelsPerLonDegree*this.scaleLat,i},fromPointToLatLng:function(t,e){var i=-1*(t.y-this.pixelOrigin.y)/this.pixelsPerLonDegree/this.scaleLat-this.offsetLat,o=(t.x-this.pixelOrigin.x)/this.pixelsPerLonDegree/this.scaleLng-this.offsetLng;return new google.maps.LatLng(i,o,e)}},google.maps.EuclideanProjection=i}),function(t){"function"==typeof define&&define.amd?define("maptypes/coordinate",["../projections/euclidean"],t):t()}(function(){var t=function(t){this.url=t};t.prototype={name:"Coordinate Map Type",minZoom:0,maxZoom:5,tileSize:new google.maps.Size(256,256),projection:new google.maps.EuclideanProjection,url:"",getTile:function(t,e,i){var o=i.createElement("div"),n=1<<e,a=t.x,s=t.y;if(0>s||s>=n||0>a||a>=n||e>4)return o.style.height=this.tileSize.height+"px",o.style.width=this.tileSize.width+"px",o.style.backgroundColor="#fcf8ed",o.style.fontSize="9",o.style.textAlign="center",o.innerHTML=e>4?"Sorry, we have no map <br /> images for this zoom level.":"",o;for(var r=0,h="t";e>r;r++)n/=2,n>s?n>a?h+="q":(h+="r",a-=n):n>a?(h+="t",s-=n):(h+="s",a-=n,s-=n);var p=new Image;return p.src=this.url+"/"+h+".jpg",o.appendChild(p),o}},google.maps.CoordinateMapType=t}),function(t){"function"==typeof define&&define.amd?define("maptypes/greyscale",["../projections/euclidean"],t):t()}(function(){var t=function(t){this.url=t};t.prototype={name:"Greyscale Map Type",minZoom:0,maxZoom:5,tileSize:new google.maps.Size(256,256),projection:new google.maps.EuclideanProjection,url:"",getTile:function(t,e,i){var o=i.createElement("div"),n=1<<e,a=t.x,s=t.y;if(0>s||s>=n||0>a||a>=n||e>4)return o.style.height=this.tileSize.height+"px",o.style.width=this.tileSize.width+"px",o.style.backgroundColor="#fcf8ed",o.style.fontSize="9",o.style.textAlign="center",o.innerHTML=e>4?"Sorry, we have no map <br /> images for this zoom level.":"",o;for(var r=0,h="t";e>r;r++)n/=2,n>s?n>a?h+="q":(h+="r",a-=n):n>a?(h+="t",s-=n):(h+="s",a-=n,s-=n);var p=i.createElement("canvas"),l=p.getContext("2d"),g=new Image;return p.setAttribute("width",this.tileSize.width),p.setAttribute("height",this.tileSize.height),g.crossOrigin="anonymous",g.src=this.url+"/"+h+".jpg",g.onload=function(){l.drawImage(g,0,0);for(var t=l.getImageData(0,0,this.tileSize.width,this.tileSize.height),e=t.data,i=0,o=0,n=e.length;n>i;i+=4)o=.3*e[i]+.59*e[i+1]+.11*e[i+2],e[i]=o,e[i+1]=o,e[i+2]=o;l.putImageData(t,0,0)}.bind(this),o.appendChild(p),o}},google.maps.GreyscaleMapType=t}),function(t){"function"==typeof define&&define.amd?define("utils/dimensions",t):t()}(function(){function t(t){this._view=t}t.prototype._view=null,t.prototype.fromLatLngToDivPixel=function(t){return this._view.getProjection().fromLatLngToDivPixel(t)},t.prototype.getScaleRate=function(t,e){return"zoom"in t&&("min"in t.zoom&&t.zoom.min>e?console.log("Zoom out of range for "+t.type):"max"in t.zoom&&e>t.zoom.max&&console.log("Zoom out of range for "+t.type),"adjusted"in t.zoom?e-=t.zoom.adjusted:"min"in t.zoom&&(e-=t.zoom.min)),1<<e},t.prototype.ellipse=function(t,e){var i,o,n,a,s,r,h=this.getScaleRate(t,e.zoom);if(t.center instanceof google.maps.LatLng||t.position instanceof google.maps.LatLng)r=this.fromLatLngToDivPixel(t.center||t.position);else{if(!(t.center instanceof google.maps.Point||t.position instanceof google.maps.Point))throw new Error("Unrecognized data type");r=t.center||t.position}a=h*t.rx,s=h*t.ry,n=h*t.radius,i=r.x-e.left,o=r.y-e.top;var p=this.fromLatLngToDivPixel(e.bounds.getNorthEast()),l=this.fromLatLngToDivPixel(e.bounds.getSouthWest());return Math.pow(l.x-e.left-i,2)/Math.pow(a||n,2)+Math.pow(l.y-e.top-o,2)/Math.pow(s||n,2)<1&&Math.pow(l.x-e.left-i,2)/Math.pow(a||n,2)+Math.pow(p.y-e.top-o,2)/Math.pow(s||n,2)<1&&Math.pow(p.x-e.left-i,2)/Math.pow(a||n,2)+Math.pow(l.y-e.top-o,2)/Math.pow(s||n,2)<1&&Math.pow(p.x-e.left-i,2)/Math.pow(a||n,2)+Math.pow(p.y-e.top-o,2)/Math.pow(s||n,2)<1?this.fillAllMap(e):{figure:{x:i,y:o,rx:a,ry:s,r:n,data:t.data},dimension:{left:(a||n)-i,top:(s||n)-o,right:(a||n)+i-e.worldWidth,bottom:(s||n)+o-e.worldWidth}}},t.prototype.circle=function(t,e){return this.ellipse(t,e)},t.prototype.text=function(t,e){var i=this.fromLatLngToDivPixel(t.position),o=i.x-e.left,n=i.y-e.top;return{figure:{x:o,y:n,text:t.text}}},t.prototype.polygon=function(t,e){for(var i,o=[],n=0,a=t.position.length;a>n;n++)i=this.fromLatLngToDivPixel(t.position[n]),o.push([0===n?"M":"L",i.x-e.left,i.y-e.top]);return o.push(["Z"]),{figure:{path:Raphael.pathToRelative(o)}}},t.prototype.path=function(t,e){for(var i=this.getScaleRate(t,e.zoom),o=this.fromLatLngToDivPixel(t.position),n=Raphael.pathToRelative(Raphael.parsePathString(t.path)),a=[],s=0,r=n.length;r>s;s++)for(var h=0,p=n[s].length;p>h;h++)0===h?a[s]=[n[s][h]]:a[s].push(0===s&&1===h?o.x-e.left+n[s][h]*i:0===s&&2===h?o.y-e.top+n[s][h]*i:n[s][h]*i);return{figure:{path:a}}},t.prototype.rect=function(t,e){var i,o,n,a,s,r,h,p,l,g,c=this.getScaleRate(t,e.zoom);if(t.position instanceof google.maps.LatLngBounds){if(t.position.contains(e.bounds.getNorthEast())&&t.position.contains(e.bounds.getSouthWest()))return this.fillAllMap(e);i=this.fromLatLngToDivPixel(t.position.getNorthEast()),o=this.fromLatLngToDivPixel(t.position.getSouthWest()),r=i.x-o.x,s=o.y-i.y,n=o.x-e.left,a=i.y-e.top,h=c*t.radius,g=1}else{if(t.position instanceof google.maps.LatLng)p=this.fromLatLngToDivPixel(t.position),l=0,g=1;else if(t.position instanceof google.maps.Point)p=t.position,l=0,g=-1;else if(t.center instanceof google.maps.LatLng)p=this.fromLatLngToDivPixel(t.center),l=.5,g=1;else{if(!(t.center instanceof google.maps.Point))throw new Error("Unrecognized data type");p=t.center,l=.5,g=-1}if(i=this.fromLatLngToDivPixel(e.bounds.getNorthEast()),o=this.fromLatLngToDivPixel(e.bounds.getSouthWest()),r=t.size.width*c,s=t.size.height*c,h=t.radius*c,n=p.x-r*l-e.left,a=p.y-s*l-e.top,n<=o.x-e.left&&a<=i.y-e.top&&n+r>=i.x-e.left&&a+s>=o.y-e.top)return this.fillAllMap(e)}return{figure:{x:n,y:a,width:r,height:s,r:h,src:t.src},dimension:{left:-n,top:-a,right:r+n-e.worldWidth*g,bottom:s+a-e.worldWidth*g},type:t.type}},t.prototype.image=function(t,e){return this.rect(t,e)},t.prototype.fillAllMap=function(t){var e,i,o,n,a,s;return e=this.fromLatLngToDivPixel(t.bounds.getNorthEast()),i=this.fromLatLngToDivPixel(t.bounds.getSouthWest()),s=e.x-i.x,a=i.y-e.y,o=i.x-t.left,n=e.y-t.top,{figure:{x:o,y:n,width:s,height:a,r:0},dimension:{left:-o,top:-n,right:s+o-t.worldWidth,bottom:a+n-t.worldWidth},type:"rect"}},t.prototype.piechart=function(t,e){return this.ellipse(t,e)},t.prototype.barchart=function(t,e){return this.rect(t,e)},t.prototype.hbarchart=function(t,e){return this.rect(t,e)},t.prototype.linechart=function(t,e){return this.rect(t,e)},t.prototype.dotchart=function(t,e){return this.rect(t,e)},google.maps.Dimensions=t}),function(t){"function"==typeof define&&define.amd?define("overlays/canvas",["../utils/dimensions"],t):t()}(function(){function t(t){this.setMap(t.map),this.shapes=t.shapes||[],this.intervals=[],this.dimensions=new google.maps.Dimensions(this)}t.prototype=new google.maps.OverlayView,t.prototype.onAdd=function(){var t=this.getProjection(),e=t.fromLatLngToDivPixel(new google.maps.LatLng(0,0)),i=t.getWorldWidth();this.canvas=document.createElement("canvas"),this.canvas.style.border="none",this.canvas.style.position="absolute",this.canvas.style.overflow="visible",this.canvas.width=i,this.canvas.height=i,this.canvas.style.left=e.x-i/2+"px",this.canvas.style.top=e.y-i/2+"px",this.getPanes().overlayImage.appendChild(this.canvas)},t.prototype.draw=function(){function t(t,e,i){e.intervals.push(setInterval(function(){e.shapes[t].drawable.draw(h,{left:y,top:v,right:x,bottom:L,fullWorldWidth:w,fullWorldHeight:P},i[t].figure,r)},e.shapes[t].interval))}for(var e=this.getProjection(),i=e.fromLatLngToDivPixel(new google.maps.LatLng(0,0)),o=this.getMap().getBounds(),n=e.getWorldWidth(),a=i.x-n/2,s=i.y-n/2,r=this.getMap().getZoom(),h=this.canvas.getContext("2d"),p=[],l={left:[0],top:[0],right:[0],bottom:[0]},g=0,c=this.intervals.length;c>g;g++)clearInterval(this.intervals[g]);for(var f=0,d=this.shapes.length;d>f;f++)try{var m=this.dimensions.rect(this.shapes[f],{map:this.getMap(),bounds:o,worldWidth:n,zoom:r,left:a,top:s});"dimension"in m&&(l.left.push(m.dimension.left),l.top.push(m.dimension.top),l.right.push(m.dimension.right),l.bottom.push(m.dimension.bottom)),p.push(m)}catch(u){console.log(u)}var y=Math.max.apply(null,l.left),v=Math.max.apply(null,l.top),x=Math.max.apply(null,l.right),L=Math.max.apply(null,l.bottom),w=y+n+x,P=v+n+L;this.canvas.style.left=a-y+"px",this.canvas.style.top=s-v+"px",this.canvas.width=w,this.canvas.height=P;for(var M=0,b=this.shapes.length;b>M;M++)t(M,this,p)},t.prototype.onRemove=function(){this.canvas.parentNode.removeChild(this.canvas)},google.maps.CanvasOverlay=t}),function(t){"function"==typeof define&&define.amd?define("overlays/raphael",["raphael","raphael.g","raphael.g.bar","raphael.g.dot","raphael.g.line","raphael.g.pie","../utils/dimensions"],t):t(Raphael)}(function(){function t(t){this.setMap(t.map),this.shapes=t.shapes||[],this.dimensions=new google.maps.Dimensions(this)}t.prototype=new google.maps.OverlayView,t.prototype.onAdd=function(){var t=this.getProjection(),e=t.fromLatLngToDivPixel(new google.maps.LatLng(0,0)),i=t.getWorldWidth();this.div=document.createElement("div"),this.div.style.border="none",this.div.style.position="absolute",this.div.style.overflow="visible",this.div.style.left=e.x-i/2+"px",this.div.style.top=e.y-i/2+"px",this.div.style.width=i+"px",this.div.style.height=i+"px",this.getPanes().overlayImage.appendChild(this.div),this.canvas=Raphael(this.div)},t.prototype.draw=function(){var t=this.getProjection(),e=t.fromLatLngToDivPixel(new google.maps.LatLng(0,0)),i=t.getWorldWidth(),o=this.getMap().getBounds(),n=e.x-i/2,a=e.y-i/2,s=this.getMap().getZoom(),r=[],h=[],p={left:[0],top:[0],right:[0],bottom:[0]};this.canvas.clear();for(var l=0,g=this.shapes.length;g>l;l++)try{var c=this.dimensions[this.shapes[l].type](this.shapes[l],{map:this.getMap(),bounds:o,worldWidth:i,zoom:s,left:n,top:a});"dimension"in c&&(p.left.push(c.dimension.left),p.top.push(c.dimension.top),p.right.push(c.dimension.right),p.bottom.push(c.dimension.bottom)),h.push({data:c.figure,type:c.type||this.shapes[l].type,attr:this.shapes[l].attr,info:this.shapes[l].info})}catch(f){console.log(f)}var d=Math.max.apply(null,p.left),m=Math.max.apply(null,p.top),u=Math.max.apply(null,p.right),y=Math.max.apply(null,p.bottom),v=d+i+u,x=m+i+y;this.div.style.left=n-d+"px",this.div.style.top=a-m+"px",this.div.style.width=v+"px",this.div.style.height=x+"px",this.canvas.setSize(v,x);for(var L=0,w=h.length;w>L;L++)r[L]=this._draw(h[L].type,h[L].data,{left:d,top:m},this.clone(h[L].info)),h[L].attr&&r[L].attr(h[L].attr)},t.prototype.onRemove=function(){this.canvas.clear(),this.div.parentNode.removeChild(this.div)},t.prototype.clone=function(t){return t?JSON.parse(JSON.stringify(t)):{}},t.prototype._draw=function(t,e,i,o){switch(t){case"path":case"polygon":return e.path[0][1]+=i.left,e.path[0][2]+=i.top,this.canvas.path(e.path);case"text":return this.canvas.text(e.x+i.left,e.y+i.top,e.text);case"image":return this.canvas.image(e.src,e.x+i.left,e.y+i.top,e.width,e.height);case"rect":return this.canvas.rect(e.x+i.left,e.y+i.top,e.width,e.height,e.r);case"circle":return this.canvas.circle(e.x+i.left,e.y+i.top,e.r);case"ellipse":return this.canvas.ellipse(e.x+i.left,e.y+i.top,e.rx,e.ry);case"piechart":return(this.canvas.g?this.canvas.g:this.canvas).piechart(e.x+i.left,e.y+i.top,e.r,o.data);case"barchart":return(this.canvas.g?this.canvas.g:this.canvas).barchart(e.x+i.left,e.y+i.top,e.width,e.height,o.data,o.param);case"hbarchart":return(this.canvas.g?this.canvas.g:this.canvas).hbarchart(e.x+i.left,e.y+i.top,e.width,e.height,o.data,o.param);case"linechart":return(this.canvas.g?this.canvas.g:this.canvas).linechart(e.x+i.left,e.y+i.top,e.width,e.height,o.x,o.y,o.param);case"dotchart":return(this.canvas.g?this.canvas.g:this.canvas).dotchart(e.x+i.left,e.y+i.top,e.width,e.height,o.xs,o.ys,o.data,o.param);default:throw new Error("Unrecognized data type: "+e.type)}},google.maps.RaphaelOverlayView=t});
//# sourceMappingURL=map-utils.min.js.map